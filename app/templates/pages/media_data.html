{% extends "base.html" %}

{% block title %}Media Data - MediaLab Manager{% endblock %}

{% block header_title %}Media Data{% endblock %}

{% block content %}
<div class="media-data">
    <!-- Filter Panel -->
    <div class="filter-panel">
        <div class="filter-controls">
            <div class="filter-group">
                <label for="media-type">Media Type</label>
                <select id="media-type" onchange="applyFilters()">
                    <option value="">All Types</option>
                    <option value="tv">TV Shows</option>
                    <option value="movie">Movies</option>
                </select>
            </div>
            <div class="filter-group">
                <label for="search">Search</label>
                <input type="text" id="search" placeholder="Search titles..." oninput="applyFilters()">
            </div>
        </div>
    </div>

    <!-- Media Items List -->
    <div class="media-items">
        <!-- TV Show Item -->
        <div class="media-item" data-type="tv">
            <div class="media-item-header" onclick="toggleDetails(this)">
                <div class="media-item-title">
                    <span class="media-icon">ðŸ“º</span>
                    Breaking Bad
                </div>
                <div class="media-item-meta">
                    <span>TV Show</span>
                    <span>5 Seasons</span>
                    <span>Added: 2023-07-15</span>
                    <button class="expand-button">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <polyline points="6 9 12 15 18 9"></polyline>
                        </svg>
                    </button>
                </div>
            </div>
            <div class="media-item-details">
                <!-- Season 1 -->
                <div class="season-group">
                    <div class="season-header" onclick="toggleSeason(this)">
                        <h4>Season 1</h4>
                        <span class="episode-count">3 Episodes</span>
                        <button class="expand-button">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <polyline points="6 9 12 15 18 9"></polyline>
                            </svg>
                        </button>
                    </div>
                    <div class="season-content">
                        <div class="file-list">
                            <div class="file-item">
                                <div class="file-icon">ðŸ“º</div>
                                <div class="file-info">
                                    <div class="file-name">Breaking Bad S01E01 - Pilot.mkv</div>
                                    <div class="file-meta">1080p</div>
                                </div>
                            </div>
                            <div class="file-item">
                                <div class="file-icon">ðŸ“º</div>
                                <div class="file-info">
                                    <div class="file-name">Breaking Bad S01E02 - Cat's in the Bag.mkv</div>
                                    <div class="file-meta">1080p</div>
                                </div>
                            </div>
                            <div class="file-item">
                                <div class="file-icon">ðŸ“º</div>
                                <div class="file-info">
                                    <div class="file-name">Breaking Bad S01E03 - And the Bag's in the River.mkv</div>
                                    <div class="file-meta">1080p</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Season 2 -->
                <div class="season-group">
                    <div class="season-header" onclick="toggleSeason(this)">
                        <h4>Season 2</h4>
                        <span class="episode-count">2 Episodes</span>
                        <button class="expand-button">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <polyline points="6 9 12 15 18 9"></polyline>
                            </svg>
                        </button>
                    </div>
                    <div class="season-content">
                        <div class="file-list">
                            <div class="file-item">
                                <div class="file-icon">ðŸ“º</div>
                                <div class="file-info">
                                    <div class="file-name">Breaking Bad S02E01 - 737.mkv</div>
                                    <div class="file-meta">1080p</div>
                                </div>
                            </div>
                            <div class="file-item">
                                <div class="file-icon">ðŸ“º</div>
                                <div class="file-info">
                                    <div class="file-name">Breaking Bad S02E02 - Grilled.mkv</div>
                                    <div class="file-meta">1080p</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Movie Item -->
        <div class="media-item" data-type="movie">
            <div class="media-item-header" onclick="toggleDetails(this)">
                <div class="media-item-title">
                    <span class="media-icon">ðŸŽ¬</span>
                    Inception
                </div>
                <div class="media-item-meta">
                    <span>Movie</span>
                    <span>2010</span>
                    <span>Added: 2023-08-20</span>
                    <button class="expand-button">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <polyline points="6 9 12 15 18 9"></polyline>
                        </svg>
                    </button>
                </div>
            </div>
            <div class="media-item-details">
                <div class="file-list">
                    <div class="file-item">
                        <div class="file-icon">ðŸŽ¬</div>
                        <div class="file-info">
                            <div class="file-name">Inception (2010).mkv</div>
                            <div class="file-meta">4K</div>
                        </div>
                    </div>
                    <div class="file-item">
                        <div class="file-icon">ðŸŽ¬</div>
                        <div class="file-info">
                            <div class="file-name">Inception (2010) - Special Features.mkv</div>
                            <div class="file-meta">1080p</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- TV Show Item -->
        <div class="media-item" data-type="tv">
            <div class="media-item-header" onclick="toggleDetails(this)">
                <div class="media-item-title">
                    <span class="media-icon">ðŸ“º</span>
                    The Mandalorian
                </div>
                <div class="media-item-meta">
                    <span>TV Show</span>
                    <span>3 Seasons</span>
                    <span>Added: 2023-09-05</span>
                    <button class="expand-button">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <polyline points="6 9 12 15 18 9"></polyline>
                        </svg>
                    </button>
                </div>
            </div>
            <div class="media-item-details">
                <!-- Season 1 -->
                <div class="season-group">
                    <div class="season-header" onclick="toggleSeason(this)">
                        <h4>Season 1</h4>
                        <span class="episode-count">2 Episodes</span>
                        <button class="expand-button">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <polyline points="6 9 12 15 18 9"></polyline>
                            </svg>
                        </button>
                    </div>
                    <div class="season-content">
                        <div class="file-list">
                            <div class="file-item">
                                <div class="file-icon">ðŸ“º</div>
                                <div class="file-info">
                                    <div class="file-name">The Mandalorian S01E01 - Chapter 1.mkv</div>
                                    <div class="file-meta">4K</div>
                                </div>
                            </div>
                            <div class="file-item">
                                <div class="file-icon">ðŸ“º</div>
                                <div class="file-info">
                                    <div class="file-name">The Mandalorian S01E02 - Chapter 2.mkv</div>
                                    <div class="file-meta">4K</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Season 2 -->
                <div class="season-group">
                    <div class="season-header" onclick="toggleSeason(this)">
                        <h4>Season 2</h4>
                        <span class="episode-count">2 Episodes</span>
                        <button class="expand-button">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <polyline points="6 9 12 15 18 9"></polyline>
                            </svg>
                        </button>
                    </div>
                    <div class="season-content">
                        <div class="file-list">
                            <div class="file-item">
                                <div class="file-icon">ðŸ“º</div>
                                <div class="file-info">
                                    <div class="file-name">The Mandalorian S02E01 - Chapter 9.mkv</div>
                                    <div class="file-meta">4K</div>
                                </div>
                            </div>
                            <div class="file-item">
                                <div class="file-icon">ðŸ“º</div>
                                <div class="file-info">
                                    <div class="file-name">The Mandalorian S02E02 - Chapter 10.mkv</div>
                                    <div class="file-meta">4K</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    function toggleDetails(header) {
        const details = header.nextElementSibling;
        const button = header.querySelector('.expand-button');

        details.classList.toggle('active');
        button.classList.toggle('active');
    }

    function toggleSeason(header) {
        const content = header.nextElementSibling;
        const button = header.querySelector('.expand-button');

        content.classList.toggle('active');
        button.classList.toggle('active');
    }

    function applyFilters() {
        const searchTerm = document.getElementById('search').value.toLowerCase();
        const mediaType = document.getElementById('media-type').value;
        const mediaItems = document.querySelectorAll('.media-item');

        mediaItems.forEach(item => {
            const title = item.querySelector('.media-item-title').textContent.toLowerCase();
            const type = item.getAttribute('data-type');

            const matchesSearch = title.includes(searchTerm);
            const matchesType = !mediaType || type === mediaType;

            item.style.display = matchesSearch && matchesType ? 'block' : 'none';
        });
    }
</script>
{% endblock %}